"use client";
import Image from 'next/image';
import Link from 'next/link';
import { usePathname, useRouter } from 'next/navigation'; // Import usePathname
import React, { useEffect, useState } from 'react';

function Navbar() {
    const [navNum, setNavNum] = useState(1);
    const pathname = usePathname(); // Get the current pathname
    const router = useRouter();
    const [loginButton, setLoginButton] = useState(false);

    useEffect(() => {
        if(localStorage.getItem('token')){
            setLoginButton(true);
        }
        console.log(pathname)
        // Detect changes to the pathname
        if (pathname === '/') {
            setNavNum(1);
        } else if (pathname === '/categories') {
            setNavNum(2);
        } else if (pathname === '/brands') {
            setNavNum(3);
        } else if (pathname === '/coupons') {
            setNavNum(4);
        } else if (pathname === '/deals') {
            setNavNum(5);
        } else if (pathname === '/mobile-app') {
            setNavNum(6);
        } else if (pathname === '/contact') {
            setNavNum(7);
        } else {
            setNavNum(0);
        }
    }, [pathname]); // Run the effect whenever pathname changes

    return (
        <div className={pathname === '/login' || pathname === '/register' ? 'hidden' :'w-[100vw] h-[74px] text-[#61707F] flex px-[88px] bg-[#FFFFFF] shadow-[#0000000A] shadow-md items-center justify-between z-10'}>
            <div className='hidden cursor-pointer' id='navbarButton'>
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_5158_41050)">
                    <path d="M5.83333 0H3.33333C2.44928 0 1.60143 0.35119 0.976311 0.976311C0.35119 1.60143 0 2.44928 0 3.33333L0 5.83333C0 6.71739 0.35119 7.56524 0.976311 8.19036C1.60143 8.81548 2.44928 9.16667 3.33333 9.16667H5.83333C6.71739 9.16667 7.56524 8.81548 8.19036 8.19036C8.81548 7.56524 9.16667 6.71739 9.16667 5.83333V3.33333C9.16667 2.44928 8.81548 1.60143 8.19036 0.976311C7.56524 0.35119 6.71739 0 5.83333 0ZM7.5 5.83333C7.5 6.27536 7.32441 6.69928 7.01184 7.01184C6.69928 7.32441 6.27536 7.5 5.83333 7.5H3.33333C2.89131 7.5 2.46738 7.32441 2.15482 7.01184C1.84226 6.69928 1.66667 6.27536 1.66667 5.83333V3.33333C1.66667 2.89131 1.84226 2.46738 2.15482 2.15482C2.46738 1.84226 2.89131 1.66667 3.33333 1.66667H5.83333C6.27536 1.66667 6.69928 1.84226 7.01184 2.15482C7.32441 2.46738 7.5 2.89131 7.5 3.33333V5.83333Z" fill="#543883"/>
                    <path d="M16.6654 0H14.1654C13.2813 0 12.4335 0.35119 11.8083 0.976311C11.1832 1.60143 10.832 2.44928 10.832 3.33333V5.83333C10.832 6.71739 11.1832 7.56524 11.8083 8.19036C12.4335 8.81548 13.2813 9.16667 14.1654 9.16667H16.6654C17.5494 9.16667 18.3973 8.81548 19.0224 8.19036C19.6475 7.56524 19.9987 6.71739 19.9987 5.83333V3.33333C19.9987 2.44928 19.6475 1.60143 19.0224 0.976311C18.3973 0.35119 17.5494 0 16.6654 0ZM18.332 5.83333C18.332 6.27536 18.1564 6.69928 17.8439 7.01184C17.5313 7.32441 17.1074 7.5 16.6654 7.5H14.1654C13.7233 7.5 13.2994 7.32441 12.9869 7.01184C12.6743 6.69928 12.4987 6.27536 12.4987 5.83333V3.33333C12.4987 2.89131 12.6743 2.46738 12.9869 2.15482C13.2994 1.84226 13.7233 1.66667 14.1654 1.66667H16.6654C17.1074 1.66667 17.5313 1.84226 17.8439 2.15482C18.1564 2.46738 18.332 2.89131 18.332 3.33333V5.83333Z" fill="#FFA360"/>
                    <path d="M5.83333 10.832H3.33333C2.44928 10.832 1.60143 11.1832 0.976311 11.8083C0.35119 12.4335 0 13.2813 0 14.1654L0 16.6654C0 17.5494 0.35119 18.3973 0.976311 19.0224C1.60143 19.6475 2.44928 19.9987 3.33333 19.9987H5.83333C6.71739 19.9987 7.56524 19.6475 8.19036 19.0224C8.81548 18.3973 9.16667 17.5494 9.16667 16.6654V14.1654C9.16667 13.2813 8.81548 12.4335 8.19036 11.8083C7.56524 11.1832 6.71739 10.832 5.83333 10.832ZM7.5 16.6654C7.5 17.1074 7.32441 17.5313 7.01184 17.8439C6.69928 18.1564 6.27536 18.332 5.83333 18.332H3.33333C2.89131 18.332 2.46738 18.1564 2.15482 17.8439C1.84226 17.5313 1.66667 17.1074 1.66667 16.6654V14.1654C1.66667 13.7233 1.84226 13.2994 2.15482 12.9869C2.46738 12.6743 2.89131 12.4987 3.33333 12.4987H5.83333C6.27536 12.4987 6.69928 12.6743 7.01184 12.9869C7.32441 13.2994 7.5 13.7233 7.5 14.1654V16.6654Z" fill="#543883"/>
                    <path d="M16.6654 10.832H14.1654C13.2813 10.832 12.4335 11.1832 11.8083 11.8083C11.1832 12.4335 10.832 13.2813 10.832 14.1654V16.6654C10.832 17.5494 11.1832 18.3973 11.8083 19.0224C12.4335 19.6475 13.2813 19.9987 14.1654 19.9987H16.6654C17.5494 19.9987 18.3973 19.6475 19.0224 19.0224C19.6475 18.3973 19.9987 17.5494 19.9987 16.6654V14.1654C19.9987 13.2813 19.6475 12.4335 19.0224 11.8083C18.3973 11.1832 17.5494 10.832 16.6654 10.832ZM18.332 16.6654C18.332 17.1074 18.1564 17.5313 17.8439 17.8439C17.5313 18.1564 17.1074 18.332 16.6654 18.332H14.1654C13.7233 18.332 13.2994 18.1564 12.9869 17.8439C12.6743 17.5313 12.4987 17.1074 12.4987 16.6654V14.1654C12.4987 13.7233 12.6743 13.2994 12.9869 12.9869C13.2994 12.6743 13.7233 12.4987 14.1654 12.4987H16.6654C17.1074 12.4987 17.5313 12.6743 17.8439 12.9869C18.1564 13.2994 18.332 13.7233 18.332 14.1654V16.6654Z" fill="#543883"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_5158_41050">
                    <rect width="20" height="20" fill="white"/>
                    </clipPath>
                    </defs>
                </svg>
            </div>
            <div className='flex items-center lg:gap-16 md:gap-8 text-[16px] font-[400] relative'>
                <Image src='/logo.png' alt='logo' width={52} height={40} />
                <ul className='md:flex hidden items-center lg:gap-[4.3vw] md:gap-8' id='navbarUl'>
                    <li onClick={()=> router.push('/')}
                        className={`cursor-pointer text-nowrap ${navNum === 1 ? 'text-[#543883] font-[600]' : ''}`}
                    >
                        الرئيسية
                    </li>
                    <li onClick={()=> router.push('/categories')}
                        className={`cursor-pointer text-nowrap ${navNum === 2 ? 'text-[#543883] font-[600]' : ''}`}
                    >
                        الفئات
                    </li>
                    <li onClick={()=> router.push('/brands')}
                        className={`cursor-pointer text-nowrap ${navNum === 3 ? 'text-[#543883] font-[600]' : ''}`}
                    >
                        العلامات التجارية
                    </li>
                    <li onClick={()=> router.push('/coupons')}
                        className={`cursor-pointer text-nowrap ${navNum === 4 ? 'text-[#543883] font-[600]' : ''}`}
                    >
                        الكوبونات
                    </li>
                    <li onClick={()=> router.push('/deals')}
                        className={`cursor-pointer text-nowrap ${navNum === 5 ? 'text-[#543883] font-[600]' : ''}`}
                    >
                        الـصفقات
                    </li>
                    <li onClick={()=> router.push('/mobile-app')}
                        className={`cursor-pointer text-nowrap ${navNum === 6 ? 'text-[#543883] font-[600]' : ''}`}
                    >
                        تطبيق الجوال
                    </li>
                    <li onClick={()=> router.push('/contact')}
                        className={`cursor-pointer text-nowrap ${navNum === 7 ? 'text-[#543883] font-[600]' : ''}`}
                    >
                        تواصل معنا
                    </li>
                </ul>
                <div
                    id='navbarUlLine'
                    className={`bg-[#FFA360] w-[7px] h-[7px] rounded-full absolute bottom-[3px] ${
                        navNum === 1
                            ? 'lg:right-[10vw] md:right-[105px] hidden md:flex'
                            : navNum === 2
                            ? 'lg:right-[230px] md:right-[165px] hidden md:flex'
                            : navNum === 3
                            ? 'lg:right-[355px] md:right-[255px] hidden md:flex'
                            : navNum === 4
                            ? 'lg:right-[490px] md:right-[360px] hidden md:flex'
                            : navNum === 5
                            ? 'lg:right-[600px] md:right-[440px] hidden md:flex'
                            : navNum === 6
                            ? 'lg:right-[725px] md:right-[530px] hidden md:flex'
                            : navNum === 7
                            ? 'lg:right-[855px] md:right-[630px] hidden md:flex'
                            : 'hidden'
                    }`}
                ></div>
            </div>
            <div className='flex gap-5'>
                <button className='flex w-[72px] items-center justify-evenly h-[40px] border-[1px] border-[#FFA360] rounded-[6px]'>
                    <p className='text-[#FFA360] text-[14px] font-[600]'>Eng</p>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clipPath="url(#clip0_5503_35364)">
                        <path d="M14.0729 11.717C14.7592 10.5988 15.1217 9.31205 15.1199 8.00001V7.99976C15.1217 6.6877 14.7592 5.4009 14.0729 4.28269L14.069 4.27658C13.4322 3.23872 12.5399 2.3815 11.4774 1.78682C10.4148 1.19215 9.21754 0.879888 7.99991 0.879883C6.78227 0.879878 5.58498 1.19213 4.52244 1.7868C3.45989 2.38146 2.5676 3.23868 1.93082 4.27653L1.92687 4.28271C1.2422 5.4017 0.879888 6.68803 0.879883 7.99986C0.879878 9.31168 1.24218 10.598 1.92684 11.717L1.93086 11.7233C2.56764 12.7611 3.45993 13.6183 4.52247 14.213C5.58501 14.8076 6.78229 15.1199 7.99991 15.1199C9.21753 15.1199 10.4148 14.8076 11.4773 14.2129C12.5399 13.6183 13.4322 12.7611 14.0689 11.7232L14.0729 11.717ZM8.90998 13.8996C8.7743 14.0305 8.61814 14.1384 8.44768 14.2189C8.30776 14.2854 8.15479 14.3199 7.99988 14.3199C7.84497 14.3199 7.692 14.2854 7.55208 14.2189C7.22768 14.0532 6.94999 13.8088 6.74439 13.5081C6.32449 12.9014 6.01331 12.2262 5.82477 11.5128C6.54907 11.4682 7.27411 11.4455 7.99988 11.4447C8.72535 11.4447 9.45043 11.4674 10.1751 11.5128C10.0708 11.8796 9.94039 12.2385 9.78504 12.5868C9.58046 13.0766 9.28335 13.5223 8.90998 13.8996ZM1.6938 8.39988H4.56564C4.58434 9.20123 4.6712 9.99953 4.82528 10.7861C4.04023 10.8552 3.25719 10.9501 2.47615 11.0708C2.01879 10.2502 1.75144 9.33751 1.6938 8.39988ZM2.47615 4.92896C3.25688 5.04995 4.0402 5.14485 4.8261 5.21367C4.67172 6.00024 4.58467 6.79853 4.5659 7.59988H1.6938C1.75143 6.66225 2.01879 5.74951 2.47615 4.92896ZM7.08978 2.10015C7.22545 1.96923 7.38161 1.86138 7.55208 1.78085C7.692 1.71437 7.84497 1.67987 7.99988 1.67987C8.15479 1.67987 8.30776 1.71437 8.44768 1.78085C8.77208 1.94655 9.04977 2.19092 9.25537 2.49162C9.67526 3.09838 9.98644 3.77354 10.175 4.48692C9.45068 4.53149 8.72564 4.5542 7.99988 4.55504C7.27441 4.55503 6.54933 4.53232 5.82464 4.48691C5.929 4.12012 6.05936 3.76123 6.21473 3.41297C6.4193 2.92318 6.71641 2.47743 7.08978 2.10015ZM14.306 7.59988H11.4341C11.4154 6.79853 11.3286 6.00022 11.1745 5.2136C11.9595 5.14452 12.7426 5.04964 13.5236 4.92896C13.981 5.74951 14.2483 6.66225 14.306 7.59988ZM5.62989 10.724C5.47344 9.95858 5.38508 9.18085 5.36585 8.39988H10.634C10.6149 9.18085 10.5267 9.95858 10.3704 10.724C9.58111 10.6722 8.79093 10.6458 7.99988 10.6447C7.2094 10.6447 6.41941 10.6711 5.62989 10.724ZM10.3699 5.27579C10.5263 6.04118 10.6147 6.81891 10.6339 7.59988H5.36576C5.38482 6.81891 5.47302 6.04117 5.62932 5.27576C6.41864 5.32755 7.20883 5.35397 7.99988 5.35503C8.79036 5.35503 9.58035 5.32861 10.3699 5.27579ZM11.4338 8.39988H14.306C14.2483 9.33751 13.981 10.2502 13.5236 11.0708C12.7429 10.9498 11.9596 10.8549 11.1737 10.7861C11.328 9.99952 11.4151 9.20123 11.4338 8.39988ZM13.0439 4.19265C12.3613 4.29113 11.6767 4.36911 10.99 4.42657C10.8666 3.96706 10.7074 3.51791 10.5139 3.08324C10.3373 2.68323 10.115 2.30497 9.85153 1.95599C11.1248 2.34648 12.2421 3.12929 13.0439 4.19265ZM3.53095 3.53095C4.26133 2.79987 5.1599 2.25911 6.14789 1.95608C6.1329 1.9755 6.11748 1.99405 6.10271 2.01387C5.59488 2.7449 5.22498 3.56262 5.01124 4.42669C4.32451 4.36853 3.63936 4.29051 2.95581 4.19265C3.13211 3.95914 3.32427 3.73805 3.53095 3.53095ZM2.95581 11.8071C3.63842 11.7086 4.32307 11.6306 5.00978 11.5732C5.13319 12.0327 5.29237 12.4818 5.48585 12.9165C5.66249 13.3165 5.88476 13.6948 6.14822 14.0438C4.87496 13.6533 3.75764 12.8705 2.95581 11.8071ZM12.4688 12.4688C11.7384 13.1999 10.8399 13.7406 9.85186 14.0437C9.86686 14.0243 9.88227 14.0057 9.89705 13.9859C10.4049 13.2549 10.7748 12.4371 10.9885 11.5731C11.6753 11.6312 12.3604 11.7092 13.044 11.8071C12.8677 12.0406 12.6755 12.2617 12.4688 12.4688Z" fill="#FFA360"/>
                        </g>
                        <defs>
                        <clipPath id="clip0_5503_35364">
                        <rect width="16" height="16" fill="white"/>
                        </clipPath>
                        </defs>
                    </svg>
                </button>
                <button  id='loginNav' onClick={() => router.push('/login')} className={loginButton? "hidden" :'bg-[#543883] text-white w-[152px] h-[40px] rounded-[6px]'}>
                    الدخول/إنشاء حساب
                </button>
            </div>
        </div>
    );
}

export default Navbar;
